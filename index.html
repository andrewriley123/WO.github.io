<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weekly Workout Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 0; padding: 0; background: #f5f5f5; color: #222; }
    header { padding: 12px 16px; background: #111827; color: white; }
    header h1 { margin: 0; font-size: 1.1rem; }
    header p { margin: 4px 0 0; font-size: 0.8rem; opacity: 0.9; }
    .progress-bar-wrap { margin-top: 8px; background: #374151; border-radius: 999px; overflow: hidden; height: 8px; }
    .progress-bar { height: 8px; width: 0%; background: #10b981; transition: width 0.2s ease; }
    .day-tabs { display: flex; overflow-x: auto; background: #e5e7eb; padding: 4px; gap: 4px; }
    .day-tab { border: none; padding: 6px 10px; border-radius: 999px; background: #d1d5db; font-size: 0.8rem; cursor: pointer; white-space: nowrap; }
    .day-tab.active { background: #111827; color: white; font-weight: 600; }
    .content { padding: 12px 16px 24px; }
    .section { background: white; margin-bottom: 12px; padding: 10px 12px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
    .section-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 6px; }
    .checkbox-row { display: flex; align-items: center; margin: 4px 0; font-size: 0.9rem; flex-wrap: wrap; gap: 4px; }
    .checkbox-row input[type="checkbox"] { width: 18px; height: 18px; margin-right: 6px; }
    .exercise-label { flex: 1 1 auto; min-width: 120px; }
    .weight-input { flex: 0 0 80px; max-width: 100px; font-size: 0.8rem; padding: 3px 4px; border-radius: 4px; border: 1px solid #d1d5db; }
    .day-progress { font-size: 0.8rem; margin-top: 4px; color: #4b5563; }
  </style>
</head>
<body>

<header>
  <h1>Weekly Workout</h1>
  <p id="weekly-progress-text">Weekly progress: 0%</p>
  <div class="progress-bar-wrap"><div class="progress-bar" id="weekly-progress-bar"></div></div>
</header>

<div class="day-tabs" id="day-tabs"></div>
<div class="content">
  <div id="day-progress" class="day-progress"></div>
  <div id="day-content"></div>
</div>

<script>
// --- UPDATED: Added "100 Pushups" under every Medicine section ---
const daysData = [
  { name: "Monday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Power Circuit (Template – 10 reps, 3 sets)", exercises: ["Clean and Press","Weighted Knee Raise","Weighted Stepups","Pullup","Incline Pushup","Triceps Dips"] },
    { title: "B. Lower Back / Core Routine", exercises: ["Deadlifts – 4×6","Back Extensions – 3×12","Plank – 3×45 sec","Glute Bridges – 4×10"] } ] },

  { name: "Tuesday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Chest & Back (Template – 10 reps, 4 sets)", exercises: ["Incline Bench Press","Pullup","Incline Pushup","Incline Pec Flys"] },
    { title: "B. Lower Back / Core Routine", exercises: ["Cable Woodchoppers – 3×12/side","Seated Hamstring Curls – 3×12","Roman Chair Stretch – 2×45 sec","Hip Flexor Stretch – 2×45 sec"] } ] },

  { name: "Wednesday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Legs (Template – 10 reps, 4 sets)", exercises: ["Squat","Straight-Leg Deadlift","Hamstring Curl","Weighted Lunge"] },
    { title: "B. Lower Back / Core Routine", exercises: ["Barbell Hip Thrusts – 4×8","Leg Press (feet high) – 4×10","Abductor Machine – 3×15","Back Extension Hold – 3×30 sec"] } ] },

  { name: "Thursday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Shoulders & Arms (Template – 10 reps, 4 sets)", exercises: ["Incline Biceps Curls","Triceps Dips","Lateral Raises","Shoulder Press"] },
    { title: "B. Lower Back / Core Routine", exercises: ["Light Row Machine – 10 min","Cat–Cow – 2×15","Lumbar Rotation Stretch – 2×12/side","Piriformis Stretch – 2×45 sec"] } ] },

  { name: "Friday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Power Circuit (Template – 10 reps, 3 sets)", exercises: ["Clean and Press","Weighted Knee Raise","Weighted Stepups","Pullup","Incline Pushup","Triceps Dips"] },
    { title: "B. Lower Back / Core Routine", exercises: ["Cable Anti-Rotation Press (Pallof) – 4×10/side","Dead Bug – 3×12","Side Plank – 3×30 sec/side","Reverse Hyper – 3×12 (if available)"] } ] },

  { name: "Saturday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Lower Back / Strength Day", exercises: ["Trap Bar Deadlift – 5×5","Glute-Ham Raise – 3×8","Lat Pulldown – 3×12","Farmer Carry – 3×1 min"] } ] },

  { name: "Sunday", sections: [ { title: "Medicine", exercises: ["Medicine", "100 Pushups"] },
    { title: "A. Around The World Ab Routine", exercises: ["Standard Crunch","Knee-up Crunches","Hip Lifts","Oblique Crunches (Side 1)","Side Plank Dips (Side 1)","Pushups","Oblique Crunches (Side 2)","Side Plank Dips (Side 2)","Heel Touches","Bicycle Crunches","Half-Up Twists"] } ] }
];

// --- The rest of the script remains unchanged ---

function isWeightedExercise(name){
  const lower=name.toLowerCase();
  const keywords=["clean","press","weighted","curl","deadlift","bench","squat","lunge","stepup","stepups","hip thrust","leg press","abductor","row machine","trap bar","glute-ham","lat pulldown","farmer","dumbbell","barbell","machine","fly","flys","raises","raise"]; return keywords.some(k=>lower.includes(k)); }

const STORAGE_KEY="weeklyWorkoutState_v2";
let state={};
try{state=JSON.parse(localStorage.getItem(STORAGE_KEY))||{};}catch(e){state={};}

function saveState(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}

function makeId(day,section,exercise){return `${day}::${section}::${exercise}`;}

const dayTabsEl=document.getElementById("day-tabs");
const dayContentEl=document.getElementById("day-content");
const dayProgressEl=document.getElementById("day-progress");
const weeklyProgressBarEl=document.getElementById("weekly-progress-bar");
const weeklyProgressTextEl=document.getElementById("weekly-progress-text");
let currentDayIndex=0;

function renderTabs(){ dayTabsEl.innerHTML=""; daysData.forEach((d,i)=>{ const b=document.createElement("button"); b.textContent=d.name; b.className="day-tab"+(i===currentDayIndex?" active":""); b.onclick=()=>{currentDayIndex=i; renderTabs(); renderDay();}; dayTabsEl.appendChild(b);});}

function renderDay(){ const day=daysData[currentDayIndex]; dayContentEl.innerHTML=""; let total=0, done=0;
  day.sections.forEach(section=>{
    const div=document.createElement("div"); div.className="section";
    const title=document.createElement("div"); title.className="section-title"; title.textContent=section.title; div.appendChild(title);

    section.exercises.forEach(ex=>{
      const id=makeId(day.name,section.title,ex);
      if(!state[id]) state[id]={checked:false,weight:""};
      const row=document.createElement("div"); row.className="checkbox-row";

      const box=document.createElement("input"); box.type="checkbox"; box.checked=state[id].checked;
      box.onchange=()=>{state[id].checked=box.checked; saveState(); renderDay(); updateWeekly();};

      const label=document.createElement("span"); label.className="exercise-label"; label.textContent=ex;

      row.appendChild(box); row.appendChild(label);

      if(isWeightedExercise(ex)&&ex.toLowerCase()!=="medicine"){ const w=document.createElement("input"); w.className="weight-input"; w.placeholder="Weight"; w.value=state[id].weight||""; w.onchange=()=>{state[id].weight=w.value; saveState();}; row.appendChild(w);}      

      div.appendChild(row);
      total++; if(state[id].checked) done++;
    });

    dayContentEl.appendChild(div);
  });

  const pct=Math.round((done/total)*100);
  dayProgressEl.textContent=`${day.name} progress: ${done} of ${total} items (${pct}%)`;
}

function updateWeekly(){ let total=0,done=0;
  daysData.forEach(day=>day.sections.forEach(sec=>sec.exercises.forEach(ex=>{ const id=makeId(day.name,sec.title,ex); total++; if(state[id]?.checked) done++; }))); const pct=Math.round((done/total)*100);
  weeklyProgressBarEl.style.width=pct+"%"; weeklyProgressTextEl.textContent=`Weekly progress: ${pct}%`;
}

renderTabs(); renderDay(); updateWeekly();
</script>

</body>
</html>
